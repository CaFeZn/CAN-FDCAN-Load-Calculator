# RoboMaster CAN/FDCAN负载计算器

## 项目简介

这是一个用于计算和优化CAN/FDCAN总线负载的工具，主要应用于RoboMaster比赛中的电机控制和数据传输优化。该工具支持实时数据比较、参数说明，并根据系统配置优化总线负载，帮助设计更高效的CAN网络，避免过载风险。

## 主要功能

CAN总线负载计算：支持经典CAN和FDCAN负载计算，帮助用户在设计阶段优化CAN网络布局。

数据帧列举与负载排除：通过列出所有数据帧并计算负载，排除潜在的CAN过载风险。

实测数据与理论数据对比：根据实测数据验证负载计算的准确性，优化工具使用体验。

参数说明：提供详细的参数说明，帮助用户更好理解工具的配置与计算方式。

## 使用说明

下载并打开 Excel 文件（支持2019及以上版本）。

根据你的系统配置，输入相关参数（如帧类型、波特率、数据段长度等）。

工具会自动计算CAN/FDCAN总线负载，并给出最小、平均、最大负载值，帮助用户合理分配CAN网络资源。

通过调整参数，避免总线过载。

## 更新记录

20250308      添加了一个总线电阻过低导致CAN通信失败的例子，以及CAN总线布线规范。新增了致谢部分。

20250311      添加了由 lc6464 制作的网页版本计算器

20250416      新增FDCAN以及经典CAN的拓展帧部分计算；

              新增位填充对实际帧长度的影响，并修复了经典CAN帧长度的一个错误：

              没有考虑帧间间隔，帧间间隔也应作为帧结构的一部分，新增输入数据不合法报错处理优化了交互界面；

20250824      修复了纯FDCAN时的负载计算

              为文档添加了实测数据（来源于XRobot）与理论计算数据的比较

              添加了参数说明

              优化了文章大纲层级

## 参考链接

原文链接：[【RM2025-西南石油大学-铁人】CAN负载计算器和提高CAN总线利用率技巧分享](https://bbs.robomaster.com/article/557395?source=8)
<img width="1713" height="468" alt="image" src="https://github.com/user-attachments/assets/e0ca7674-4014-4044-846a-fa8e6a22551d" />


由 lc6464 制作的[网页版本计算器](https://lc6464.github.io/CANbus-Load-Calculator/)

## 致谢

感谢 福建理工大学的同学 提供的CAN电阻案例一份。

感谢 达妙科技 小红帽 为我提供CAN相关规范的解答。

感谢 lc6464 制作了网页版本计算器。 https://lc6464.github.io/CANbus-Load-Calculator/ 

感谢 XRobot 提供的 CAN/FDCAN 实测数据。 https://xrobot-org.github.io/docs/perf/perf-can 
